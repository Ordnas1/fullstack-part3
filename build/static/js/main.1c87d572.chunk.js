(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),u=n(17),o=n.n(u),a=(n(22),n(8)),i=n(3),s=n(0),d=function(e){var t=e.handleSubmit,n=e.handleNameChange,r=e.handleNumberChange,c=e.nameValue,u=e.numberValue;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:c,onChange:n,required:!0})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:u,onChange:r,required:!0})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var t=e.filterValue,n=e.handleFilter;return Object(s.jsxs)("div",{children:["Filter by name: ",Object(s.jsx)("input",{value:t,onChange:n})]})},j=function(e){var t=e.personList,n=e.handleDestroy;return Object(s.jsx)("ul",{children:t.map((function(e){return Object(s.jsxs)("li",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return n(e.id)},children:"Delete"})]},e.id)}))})},b=function(e){var t=e.message,n=e.type;return""===t?Object(s.jsx)("div",{}):"error"===n?Object(s.jsx)("div",{className:"error",children:t}):Object(s.jsx)("div",{className:"success",children:t})},f=n(5),h=n.n(f),m="/api/persons",O={getAll:function(){return h.a.get(m).then((function(e){return e.data}))},createPerson:function(e){return h.a.post(m,e).then((function(e){return e.data}))},destroy:function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return h.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))}},p=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),o=Object(i.a)(u,2),f=o[0],h=o[1],m=Object(r.useState)(""),p=Object(i.a)(m,2),v=p[0],x=p[1],g=Object(r.useState)(""),y=Object(i.a)(g,2),C=y[0],w=y[1],S=Object(r.useState)(""),L=Object(i.a)(S,2),T=L[0],F=L[1],N=Object(r.useState)(""),k=Object(i.a)(N,2),V=k[0],D=k[1];Object(r.useEffect)((function(){return O.getAll().then((function(e){return c(e)}))}),[]);var P=0===C.length?n:n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)(b,{message:T,type:V}),Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(l,{filterValue:C,handleFilter:function(e){w(e.target.value)}}),Object(s.jsx)("h3",{children:"Add new"}),Object(s.jsx)(d,{handleSubmit:function(e){var t,r;if(e.preventDefault(),n.map((function(e){return e.name.toLowerCase()})).includes(f.toLowerCase())&&window.confirm("".concat(f," alredy exists. Replace old phone number?"))){var u=n.find((function(e){return e.name.toLowerCase()===f.toLowerCase()})).id;return console.log(u),t=u,r={name:f,number:v},void O.update(t,r).then((function(e){var r=Object(a.a)(n),u=r.findIndex((function(e){return e.id===t}));console.log("updating data with index",u,e),r[u]=e,c(r)})).then((function(){F("".concat(r.name," updated successfully")),D("success"),setTimeout((function(){F("")}),5e3)})).catch((function(e){F(e.response.data.error),D("error"),setTimeout((function(){F("")}),5e3)}))}var o={name:f,number:v};O.createPerson(o).then((function(e){return c(n.concat(e))})).then((function(){F("".concat(o.name," added successfully")),D("success"),setTimeout((function(){F("")}),5e3)})).catch((function(e){console.log(e.response),F(e.response.data.error),D("error"),setTimeout((function(){F("")}),5e3)})),h(""),x("")},handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){x(e.target.value)},nameValue:f,numberValue:v}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(j,{personList:P,handleDestroy:function(e){window.confirm("Are you sure you want to delete this record?")&&O.destroy(e).then((function(t){var r=Object(a.a)(n).filter((function(t){return t.id!==e}));c(r),F("data destroyed successfully"),D("success"),setTimeout((function(){F("")}),5e3)})).catch((function(e){F("Record already destroyed"),D("error"),setTimeout((function(){F("")}),5e3)}))}})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,u=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),u(e),o(e)}))};o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(p,{})}),document.getElementById("root")),v()}},[[42,1,2]]]);
//# sourceMappingURL=main.1c87d572.chunk.js.map